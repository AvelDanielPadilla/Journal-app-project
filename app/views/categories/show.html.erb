<% if flash.notice %>
  <div class="alert alert-success"><%= flash.notice %></div>
<% end %>
<table>
  <thead>
    <tr>
      <th>No.</th>
      <th>Note</th>
      <th>Description</th>
      <th><%= link_to "Add Task", new_task_path(category_id: @category.id) %></th>
    </tr>
  </thead>

  <tbody>
      <tr>
        <td><%= @category.number %></td>
        <td><%= @category.note %></td>
        <td><%= @category.description %></td>
      </tr>
  </tbody>
</table>
<p><strong>Tasks for <%= @category.note %></strong></p>
  <ul>
    <% @tasks.each do |task| %>
      <li>
        <strong><%= task.taskname %></strong> - <%= task.details %> 
        (Due:
        <% if task.duedate == Date.today %>
          <span style="background-color: orange; color: black; padding: 2px 6px; border-radius: 4px;">
            <%= task.duedate %> (Today)
          </span>
        <% elsif task.duedate < Date.today %>
          <span style="background-color: red; color: white; padding: 2px 6px; border-radius: 4px;">
            <%= task.duedate %> (Past Due)
          </span>
        <% else %>
          <%= task.duedate %>
        <% end %>
      )
      </li>
      <button><%= link_to 'Show Task', task_path(task.id) %></button>
      <button><%= link_to 'Edit Task', edit_task_path(task.id)%></button>
      <%= button_to 'Delete Task', delete_task_path(task.id), method: :delete %>
    <% end %>
  </ul>
<%= link_to "Back", categories_path%>